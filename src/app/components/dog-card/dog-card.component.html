<div>
  {{ dogImageState | async | json }}
</div>
<div>
  {{ dogInfoState | async | json }}
</div>
<ng-container
  *ngIf="dogImageState | async as dogImage"
  [ngSwitch]="dogImage.state"
>
  <ng-container *ngSwitchCase="ContentState.LOADING">
    <mat-spinner style="margin: 2rem auto"></mat-spinner>
  </ng-container>
  <ng-container *ngSwitchCase="ContentState.ERR"> </ng-container>
  <ng-container *ngSwitchCase="ContentState.LOADED">
    <mat-card [style.maxWidth]="'400px'" class="mat-card">
      <mat-card-header>
        <mat-card-title>{{ dogImage.title }}</mat-card-title>
        <mat-card-subtitle>Dog Breed</mat-card-subtitle>
        <div>
          <button
            mat-icon-button
            color="primary"
            *ngIf="!favoritesMode"
            (click)="getAnotherDog.emit()"
          >
            <mat-icon>cached</mat-icon>
          </button>
          <button mat-icon-button>
            <mat-icon color="warn" (click)="handleFavorite()">{{
              favorited ? "favorite" : "favorite_border"
            }}</mat-icon>
          </button>
          <button mat-icon-button>
            <mat-icon color="primary">share</mat-icon>
          </button>
        </div>
      </mat-card-header>
      <img
        mat-card-image
        #imageURLEl
        src="{{ dogImage.item?.message }}"
        alt="Image of {{ dogImage.title }}"
      />

      <mat-card-content>
        <div fxLayout="row" fxLayoutAlign="space-between" style="width: 100%">
          <mat-expansion-panel
            [(expanded)]="xpandStatus"
            hideToggle
            style="width: 100%"
          >
            <mat-expansion-panel-header>
              <mat-icon color="accent">info</mat-icon>
              <mat-panel-title>info</mat-panel-title>
              <mat-panel-description>
                This or a related breed
              </mat-panel-description>
            </mat-expansion-panel-header>
            <!-- DOG INFO -->
            <ng-container
              *ngIf="dogInfoState | async as dogInfo"
              [ngSwitch]="dogInfo.state"
            >
              <ng-container *ngSwitchCase="ContentState.LOADED">
                <mat-card-header [ngStyle]="{ 'justify-content': 'left' }">
                  <div
                    mat-card-avatar
                    class="example-header-image"
                    [ngStyle]="{
                      'background-image': 'url(' + dogInfo.item?.image + ')',
                      'background-size': 'cover'
                    }"
                  ></div>
                  <mat-card-title>{{ dogInfo.item?.breedName }}</mat-card-title>
                  <mat-card-subtitle>{{
                    dogInfo.item?.dogInfo?.breedGroup
                  }}</mat-card-subtitle>
                </mat-card-header>
                <p>{{ dogInfo.item?.description }}</p>
                <ul [ngStyle]="{ 'list-style-type': 'none' }">
                  <li>
                    <b>Life Expectancy: </b> {{ dogInfo.item?.dogInfo?.life }}
                  </li>
                  <li><b>Height:</b> {{ dogInfo.item?.dogInfo?.height }}</li>
                  <li><b>Weight:</b> {{ dogInfo.item?.dogInfo?.weight }}</li>
                </ul>
              </ng-container>
              <ng-container *ngSwitchCase="ContentState.LOADING">
                <mat-spinner style="margin: auto"></mat-spinner>
              </ng-container>
              <ng-container *ngSwitchCase="ContentState.ERR">
                <mat-card-subtitle
                  >We couldn't find any info for this puppy
                  :(</mat-card-subtitle
                >
              </ng-container>
            </ng-container>
          </mat-expansion-panel>
        </div>
      </mat-card-content>
    </mat-card>
  </ng-container>
</ng-container>
